(window.webpackJsonpmap=window.webpackJsonpmap||[]).push([[0],{135:function(e,t,a){},138:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(12),r=a.n(i),c=(a(86),a(19)),s=a(14),l=a(23),u=a(24),p=a(13),d=a(27),m=a(161),h=a(28),f=a.n(h),g=a(164),v=a(163),b=a(165),y=a(78),E=a.n(y),w=(a(53),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={value:""},a.onChange=function(e){return a._onChange(e)},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e,t){t.value!==this.state.value&&this.props.onChange(this.state.value)}},{key:"_onChange",value:function(e){var t=e.target.value;this.setState({value:t})}},{key:"render",value:function(){return o.a.createElement("input",{type:"text",placeholder:this.props.placeholder,className:"mm-popup__input",value:this.state.value,onChange:this.onChange})}}]),t}(o.a.Component)),k=a(10),x=a(36),j=a(166),C=a(162),O=a(47),M=a(75),N=a.n(M),P=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).panImage=o.a.createRef(),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("h1",null,"360 Photo Viewer"),o.a.createElement(O.a,{ref:this.panImage,width:"100%",height:"500px",image:N.a,pitch:10,yaw:180,hfov:10,autoLoad:!0,onLoad:function(){console.log("panorama loaded")}},o.a.createElement(O.a.Hotspot,{type:"info",pitch:11,yaw:-167,text:"Info Hotspot Text 3",URL:"https://github.com/ED1Yang/Vault"})),o.a.createElement("button",{onClick:function(){return console.log(e.panImage.current.getViewer().getHfov())}},"get pitch"))}}]),t}(o.a.Component),S=Object(m.a)(function(e){return{root:{display:"flex",justifyContent:"center",alignItems:"flex-end"},icon:{margin:e.spacing(2)},iconHover:{cursor:"pointer","&:hover":{color:x.a[800]}},paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,4),color:"green","text-align":"center"},fab:{margin:e.spacing(1)}}});function I(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}function D(e){var t=e.value.x,a=e.value.y,n=S(),i=o.a.useState(I),r=Object(k.a)(i,1)[0],c=o.a.useState(!1),s=Object(k.a)(c,2),l=s[0],u=s[1];return o.a.createElement("div",{className:n.root},o.a.createElement(j.a,{className:"modals","aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:l,onClose:function(){u(!1)}},o.a.createElement("div",{style:r,className:n.paper},""===e.value.img?o.a.createElement("p",{style:{color:"red"}},"No image yet"):o.a.createElement(P,null),o.a.createElement("h2",{id:"simple-modal-title"},"Current point position:"),o.a.createElement("p",{id:"simple-modal-description"},"x: ",t," y: ",a))),o.a.createElement(C.a,{className:n.iconHover,onClick:function(){u(!0)}},"fiber_manual_record"))}var _=a(9),H=a(167),L=Object(_.a)(function(e){return{root:{width:28,height:16,padding:0,display:"flex"},switchBase:{padding:2,color:e.palette.grey[500],"&$checked":{color:e.palette.common.white,"& + $track":{opacity:1,backgroundColor:e.palette.primary.main,borderColor:e.palette.primary.main}}},thumb:{width:12,height:12,boxShadow:"none"},track:{border:"1px solid ".concat(e.palette.grey[500]),borderRadius:8,opacity:1,backgroundColor:e.palette.common.white},checked:{}}})(H.a),R=(a(135),Object(m.a)(function(e){return{fab:{margin:e.spacing(1)}}})),B=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).displayPoints=function(){return a.state.points.map(function(e){return a.showOnePoint(e.ID,e.Lat,e.Lon,e.Img)})},a.setPosition=a.setPosition.bind(Object(p.a)(a)),a.insertMarker=a.insertMarker.bind(Object(p.a)(a)),a.addNewPoint=a.addNewPoint.bind(Object(p.a)(a)),a.handleModeChange=a.handleModeChange.bind(Object(p.a)(a)),a.state={x:"",y:"",isEditMode:!1,points:[],message:""},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"getData",value:function(){var e=this;fetch("http://localhost/api/client/2").then(function(t){return t.json().then(function(t){e.setState({points:t})})})}},{key:"componentDidMount",value:function(){this.getData()}},{key:"showOnePoint",value:function(e,t,a,n){var i={color:"green",left:t-12+"px",top:a-12+"px"};return o.a.createElement("div",{className:"currentPoints",style:i,key:e},o.a.createElement(D,{value:{x:t,y:a,img:n},parent:this}))}},{key:"setPosition",value:function(e){this.state.isEditMode&&this.setState({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY})}},{key:"insertMarker",value:function(){if(this.state.isEditMode&&""!==this.state.x){var e={color:"goldenrod",left:this.state.x-12+"px",top:this.state.y-12+"px"};return o.a.createElement("div",{className:"marker",style:e},o.a.createElement(D,{value:{x:this.state.x,y:this.state.y,img:""}}))}}},{key:"handleModeChange",value:function(){!1===this.state.isEditMode?this.setState({isEditMode:!0}):this.setState({isEditMode:!1,x:"",y:""})}},{key:"addNewPoint",value:function(){var e=this.state.x,t=this.state.y,a="";f.a.registerPlugin("prompt",function(n,i,r){var c=null;this.create({title:"Confirmation window",content:o.a.createElement(w,{onChange:function(e){c=e},placeholder:i,value:n}),buttons:{left:["cancel"],right:[{text:"Submit",key:"\u2318+s",className:"success",action:function(){var n=this,o=new FormData;o.append("latitude",e),o.append("longitude",t),o.append("info",c),o.append("user_id","2"),fetch("http://localhost/api/client",{method:"POST",body:o}).then(function(e){return e.json()}).then(function(e){a=e.Message,r(a),f.a.close(),n.props.parent.getData(),n.props.parent.displayPoints(),n.props.parent.setState({x:"",y:""})}).catch(function(e){return console.log("error:",e)})}}]}})}),f.a.plugins().prompt("","extra information",function(e){f.a.alert("feedback: "+e)})}},{key:"render",value:function(){return o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"main_div"},o.a.createElement("div",{className:"map"},o.a.createElement("img",{alt:"map",src:"https://www.livebakerblock.com/wp-content/uploads/2017/07/baker-plan-c1-1600px.png",onClick:this.setPosition})),this.displayPoints(),this.insertMarker()),o.a.createElement("div",{className:"panel"},o.a.createElement(v.a,{component:"div"},o.a.createElement(g.a,{component:"label",container:!0,alignItems:"center",spacing:1},o.a.createElement(g.a,{item:!0},"Review"),o.a.createElement(g.a,{item:!0},o.a.createElement(L,{onChange:this.handleModeChange,value:this.state.isEditMode})),o.a.createElement(g.a,{item:!0},"Edit"))),this.state.isEditMode&&""!==this.state.x&&o.a.createElement("div",null,o.a.createElement(b.a,{color:"primary","aria-label":"add",className:R.fab,onClick:this.addNewPoint},o.a.createElement(E.a,null)),o.a.createElement("h1",null,this.state.x," ",this.state.y))),o.a.createElement(f.a,{parent:this}))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},53:function(e,t,a){},75:function(e,t,a){e.exports=a.p+"static/media/test2.2e46337c.png"},81:function(e,t,a){e.exports=a(138)},86:function(e,t,a){},97:function(e,t){}},[[81,1,2]]]);
//# sourceMappingURL=main.9c4312fc.chunk.js.map